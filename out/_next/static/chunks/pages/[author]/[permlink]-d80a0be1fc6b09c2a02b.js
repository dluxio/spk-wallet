(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[747],{73948:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var i=n(83789),r=n(80318),o=n(67294),a=n(11163),s=n(60590),l=n.n(s),u=n(87893),c=n(43196),d=n(2804),f=n(63569),p=n(89583),h=n(60155),y=n(45051),m=n(85893),v=function(e){var t=e.comment,n=(0,d.sJ)(f.KL),i=(0,a.useRouter)(),r=new u.Client(y.ZA),s=(0,o.useState)(y.$8),l=s[0],v=s[1],x=(0,o.useState)(!1),b=x[0],g=x[1],j=(0,o.useState)(""),_=j[0],P=j[1],w=(0,o.useState)("#000"),S=w[0],N=w[1];(0,o.useEffect)((function(){var e=document.getElementById("comment-body-".concat(t.id));e&&(e.innerHTML=t.body),r.database.getAccounts([t.author]).then((function(e){v(JSON.parse(e[0].posting_json_metadata).profile.profile_image)}))}),[]);return(0,m.jsxs)("div",{className:"text-white bg-gray-600 p-4 rounded-xl border-2 border-gray-800",children:[(0,m.jsxs)("div",{className:"flex gap-2 items-center mb-2",children:[(0,m.jsx)("img",{src:l,className:"rounded-full border-2 border-gray-800",height:45,width:45,alt:"profile_picture"}),(0,m.jsx)("h1",{onClick:function(){return i.push("/@".concat(t.author))},className:"text-xl hover:text-gray-700 transition-all cursor-pointer",children:t.author})]}),(0,m.jsxs)("div",{className:"text-white mr-1 ml-2 whitespace-pre-wrap break-words",children:[(0,m.jsx)("div",{id:"comment-body-".concat(t.id)}),(0,m.jsxs)("div",{className:"w-auto",children:[(0,m.jsx)("div",{className:"flex",children:(0,m.jsxs)("div",{onClick:function(){return g(!b)},className:"hover:bg-gray-700 px-2 py-1 my-1 rounded-xl cursor-pointer flex items-center gap-2",children:[(0,m.jsx)(p.Bjt,{size:20,color:"#fff",className:"my-3"}),"(",t.replies.length,")"]})}),b&&(0,m.jsxs)("div",{className:"relative flex w-1/2",children:[(0,m.jsx)("input",{type:"text",className:"text-black w-full outline-none p-2 rounded-xl my-2",placeholder:"Write a reply",onChange:function(e){return P(e.target.value)}}),(0,m.jsx)(h.yhK,{color:S,size:25,onMouseEnter:function(){return N("#dcdcdc")},onMouseLeave:function(){return N("#000")},onClick:function(){(0,c.Hi)({author:n.name,body:_,parent_author:t.author,parent_permlink:t.permlink,permlink:"re-previous-".concat(t.author,"-").concat(t.permlink)})},className:"absolute right-4 top-4 cursor-pointer"})]})]})]}),t.replies.map((function(e){var n=document.getElementById("comment-body-".concat(t.id,"-replie-").concat(e.id));return n&&(n.innerHTML=e.body),(0,m.jsxs)("div",{className:"mx-3",children:[(0,m.jsx)("h1",{onClick:function(){return i.push("/@".concat(t.author))},className:"text-xl font-semibold text-white hover:text-gray-700 cursor-pointer",children:e.author}),(0,m.jsx)("h1",{id:"comment-body-".concat(t.id,"-replie-").concat(e.id),className:"text-white mx-2"})]},e.id)}))]})},x=n(47320),b=n(37039),g=function(){var e,t=new u.Client(y.ZA),n=(0,o.useState)(0),s=n[0],g=n[1],j=(0,o.useState)(""),_=j[0],P=j[1],w=(0,o.useState)([]),S=w[0],N=w[1],O=(0,o.useState)(null),k=O[0],M=O[1],C=(0,o.useState)(!1),E=C[0],A=C[1],F=(0,o.useState)("#000"),R=F[0],H=F[1],T=(0,o.useState)(!1),I=T[0],L=T[1],z=(0,o.useState)([]),U=z[0],B=z[1],J=(0,o.useState)(!1),q=J[0],V=J[1],Z=(0,o.useState)(""),D=Z[0],K=Z[1],W=(0,o.useState)(!1),X=W[0],$=W[1],G=(0,o.useState)(""),Y=G[0],Q=G[1],ee=(0,o.useState)([]),te=ee[0],ne=ee[1],ie=(0,d.FV)(f.D2),re=(0,r.Z)(ie,2),oe=(re[0],re[1]),ae=(0,o.useState)(null),se=ae[0],le=ae[1],ue=(0,d.FV)(f.Lf),ce=(0,r.Z)(ue,2),de=ce[0],fe=ce[1],pe=(0,a.useRouter)(),he=(0,d.sJ)(f.KL),ye=pe.query,me=ye.permlink,ve=ye.author,xe=(0,b.$G)().t;(0,o.useEffect)((function(){if(X){document.title="DLUX | ".concat(se.title);var e=se.json_metadata,t=JSON.parse(e).vrHash,n=JSON.parse(e).scrolling,i=location.href.split("?")[1],r=document.createElement("iframe");r.id="theIframe",r.setAttribute("scrolling",n||"yes"),r.width="100%",r.height="100%",r.setAttribute("allowfullscreen","true"),r.setAttribute("allow","gyroscope; accelerometer; microphone; camera"),r.src="".concat(de,"ipfs/").concat(t,"?").concat(i),document.getElementById("iframe-app")&&document.getElementById("iframe-app").appendChild(r)}}),[X]);var be=function(){(0,c.Ns)(he.name,Y,me,s).then((function(e){e&&e.success&&oe((function(t){return[].concat((0,i.Z)(t),[e])}))}))};(0,o.useEffect)((function(){if(ve&&"@"===ve.slice(0,1)){if("https://anywhere.ipfs.dlux.io/"===de){var e=ve.slice(1,ve.length).replace(".","-");fe("https://".concat(e,".ipfs.dlux.io/"))}Q(ve.slice(1,ve.length))}}),[]);(0,o.useEffect)((function(){""!==Y&&(l().api.getContent(Y,me,(function(e,t){e&&console.log(e),le(t),M(JSON.parse(t.json_metadata))})),t.database.call("get_content_replies",[Y,me]).then((function(e){ne(e)})))}),[Y]),(0,o.useEffect)((function(){if(k){var e=[];if(k.image.forEach((function(t,n){e.push({id:n,url:t})})),0!==e.length&&B(e),k.app.includes("3speak")){A(!0);var t="https://ipfs.io/ipfs/"+k.video.info.ipfs,n="https://ipfs.io/ipfs/"+k.video.info.ipfsThumbnail;n&&t&&N((function(e){return[].concat((0,i.Z)(e),[{file:t,image:n}])}))}else{var r;(r=k.image&&Array.isArray(k.image)?k.image[0]:"string"==typeof k.image?k.image:k.Hash360&&(k.Hash360,1)?"https://ipfs.io/ipfs/".concat(k.Hash360):"https://www.dlux.io/img/dlux-sdk.png")&&"https"!==r.substr(0,5)&&(r="https://www.dlux.io/img/dlux-sdk.png"),K(r)}}}),[k]);(0,o.useMemo)((function(){return U.map((function(e){return{key:String(e.id),children:(0,m.jsx)("div",{style:{backgroundImage:"url(".concat(e.url,")")}})}}))}),[U]);return X?(0,m.jsxs)("div",{className:"w-full h-screen fixed top-0 left-0 bg-black text-white text-2xl font-bold bg-opacity-70",children:[(0,m.jsxs)("div",{className:"flex px-10 justify-between w-full bg-blue-500",children:[(0,m.jsx)("span",{className:"hover:text-gray-500 cursor-pointer",onClick:function(){document.querySelectorAll("iframe").forEach((function(e){return e.remove()})),$(!1)},children:"DLUX"}),(0,m.jsx)("span",{children:null===se||void 0===se?void 0:se.title})]}),(0,m.jsx)("div",{className:"w-full h-full",id:"iframe-app"})]}):se&&(0,m.jsx)("div",{className:"w-full mx-auto max-w-3xl",children:(0,m.jsxs)("div",{className:"flex justify-evenly flex-col w-full mt-10",children:[E?(0,m.jsx)("div",{className:"w-full flex justify-center my-2",children:(0,m.jsx)(x.Z,{className:"rounded-xl w-4/5",playerId:"my-unique-id",playerScript:"https://cdn.jwplayer.com/libraries/HT7Dts3H.js",playlist:S})}):(0,m.jsx)("div",{className:"flex justify-center w-full my-2",children:(0,m.jsx)("img",{src:D,alt:"thumbnail"})}),JSON.parse(se.json_metadata).vrHash&&(0,m.jsx)("button",{className:"mx-auto px-4 py-2 rounded-lg border-2 text-white bg-blue-500 border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-700",onClick:function(){return $(!0)},children:xe("runApp")}),(0,m.jsxs)("div",{className:"p-5",children:[(0,m.jsx)("h1",{className:"text-white text-3xl",children:null===se||void 0===se?void 0:se.title}),(0,m.jsx)("h1",{className:"text-white text-center sm:mx-3 sm:text-left text-lg cursor-pointer",children:null===(e=JSON.parse(se.json_metadata))||void 0===e?void 0:e.description}),(0,m.jsxs)("div",{className:"flex items-center w-full my-5 mx-2 gap-2",children:[I?(0,m.jsxs)("div",{onClick:be,className:"flex text-white mx-1 gap-2 rounded-xl px-2 py-1 bg-green-500 cursor-pointer",children:[(0,m.jsx)(p.$0H,{size:25,color:"#fff"}),s/100,"%"]}):(0,m.jsx)("div",{className:"px-2 py-1 cursor-pointer",children:(0,m.jsx)(p.$0H,{size:25,color:"#fff",onClick:function(){V(!1),L(!0)}})}),q?(0,m.jsxs)("div",{onClick:be,className:"flex text-white mx-1 gap-2 rounded-xl px-2 py-1 bg-red-500 cursor-pointer",children:[(0,m.jsx)(p.c0u,{size:25,color:"#fff"}),s/100,"%"]}):(0,m.jsx)("div",{className:"px-2 py-1 cursor-pointer",children:(0,m.jsx)(p.c0u,{size:25,color:"#fff",onClick:function(){L(!1),V(!0)}})}),(0,m.jsxs)("h1",{className:"text-white text-xl cursor-pointer",onClick:function(){L(!1),V(!1)},children:["(",se.active_votes.length,")"]})]}),(0,m.jsxs)("div",{className:"w-full",children:[I&&(0,m.jsx)("input",{className:"my-2 w-full",onChange:function(e){return g(+e.target.value)},type:"range",min:"0",max:"10000",value:"0"}),q&&(0,m.jsx)("input",{className:"my-2 w-full",onChange:function(e){return g(+e.target.value)},type:"range",min:"0",max:"10000",value:"0"})]}),(0,m.jsxs)("div",{className:"my-2",children:[(0,m.jsx)("h1",{className:"text-white border-b-2 border-white pb-1 text-2xl",children:xe("comments")}),(0,m.jsxs)("div",{className:"relative flex",children:[(0,m.jsx)("input",{type:"text",className:"w-full outline-none p-2 rounded-xl my-2",placeholder:xe("writeComment"),onChange:function(e){return P(e.target.value)}}),(0,m.jsx)(h.yhK,{color:R,size:25,onMouseEnter:function(){return H("#dcdcdc")},onMouseLeave:function(){return H("#000")},onClick:function(){_&&(0,c.UI)({author:he.name,title:"",body:_,parent_author:Y,parent_permlink:me,permlink:"re-previous-".concat(Y,"-").concat(me),json_metadata:JSON.stringify({tags:["hiveio"]})}),P("")},className:"absolute right-4 top-4 transition-all cursor-pointer"})]}),(0,m.jsx)("div",{className:"flex flex-col justify-center gap-3 my-3",children:te.map((function(e){return(0,m.jsx)(v,{comment:e},e.id)}))})]})]})]})})}},71425:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[author]/[permlink]",function(){return n(73948)}])},42804:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=c(n(34171)),r=c(n(96359)),o=c(n(99569)),a=c(n(98886)),s=c(n(78454)),l=c(n(56565)),u=c(n(84515));function c(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return{onAdPlay:i.default.bind(e),onBeforePlay:r.default.bind(e),onFullScreen:o.default.bind(e),onMute:a.default.bind(e),onPlay:s.default.bind(e),onTime:l.default.bind(e),onVideoLoad:u.default.bind(e)}}},34171:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){this.state.adHasPlayed?this.props.onAdResume(e):(this.props.onAdPlay(e),this.setState({adHasPlayed:!0}))}},96359:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=t.getPlaylistItem();this.state.hasPlayed||this.state.adHasPlayed||"function"!==typeof this.props.generatePrerollUrl||t.playAd(this.props.generatePrerollUrl(n))}},99569:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.fullscreen?this.props.onEnterFullScreen(e):this.props.onExitFullScreen(e)}},98886:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.mute?this.props.onMute(e):this.props.onUnmute(e)}},78454:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){"autostart"===e.playReason?(this.setState({hasPlayed:!0}),this.props.onAutoStart(e)):!this.state.hasPlayed||"buffering"!==e.oldstate&&"paused"!==e.oldstate?(this.props.onPlay(e),this.setState({hasPlayed:!0})):this.props.onResume(e)}},56565:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this.state.hasFired,n=e.position,i=e.duration,r=!1;this.props.onTime(e),!t.threeSeconds&&n>3&&(this.props.onThreeSeconds(),t.threeSeconds=!0,r=!0),!t.tenSeconds&&n>10&&(this.props.onTenSeconds(),t.tenSeconds=!0,r=!0),!t.thirtySeconds&&n>30&&(this.props.onThirtySeconds(),t.thirtySeconds=!0,r=!0),!t.twentyFivePercent&&n/i*100>25&&(this.props.onTwentyFivePercent(),t.twentyFivePercent=!0,r=!0),!t.fiftyPercent&&n/i*100>50&&(this.props.onFiftyPercent(),t.fiftyPercent=!0,r=!0),!t.seventyFivePercent&&n/i*100>75&&(this.props.onSeventyFivePercent(),t.seventyFivePercent=!0,r=!0),!t.ninetyFivePercent&&n/i*100>95&&(this.props.onNinetyFivePercent(),t.ninetyFivePercent=!0,r=!0),r&&this.setState({hasFired:t})}},84515:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){this.setState({hasFired:{}}),this.props.onVideoLoad(e)}},19090:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){},i={aspectRatio:"inherit",file:"",isAutoPlay:void 0,isMuted:void 0,onAdPlay:n,onAdResume:n,onAdSkipped:n,onAdComplete:n,onEnterFullScreen:n,onExitFullScreen:n,onMute:n,onUnmute:n,onAutoStart:n,onResume:n,onPlay:n,onClose:n,onReady:n,onError:n,onAdPause:n,onPause:n,onVideoLoad:n,onOneHundredPercent:n,onThreeSeconds:n,onTenSeconds:n,onThirtySeconds:n,onTwentyFivePercent:n,onFiftyPercent:n,onSeventyFivePercent:n,onNinetyFivePercent:n,onTime:n,onBuffer:n,onBufferChange:n,playlist:"",useMultiplePlayerScripts:!1};t.default=i},53817:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.onload||function(){};return function(){n(),t()}}},4080:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t;if("on"===e.slice(0,2)){var n=e.slice(2),i=(t=n,Array.isArray(t)?t:Array.from(t)),r=i[0],o=i.slice(1);return""+r.toLowerCase()+o.join("")}return null}},87890:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=function(e){var t=e.aspectRatio,i=e.customProps,r=void 0===i?{}:i,o=e.file,a=e.generatePrerollUrl,s=e.image,l=e.isAutoPlay,u=e.isMuted,c=e.licenseKey,d=e.playlist,f=!!a,p={};return c&&(p.key=c),d?p.playlist=d:o&&(p.file=o),t&&"inherit"!==t&&(p.aspectratio=t),f&&(p.advertising={client:"googima",admessage:"Ad \u2014 xxs left",autoplayadsmuted:!0}),"undefined"!==typeof l&&(p.autostart=!!l),"undefined"!==typeof u&&(p.mute=!!u),s&&(p.image=s),n(p,r)}},7512:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(4080),o=(i=r)&&i.__esModule?i:{default:i};t.default=function(e){var t=e.component,n=e.player,i=e.playerOpts;n.setup(i);var r={};Object.keys(t.props).forEach((function(e){var n=(0,o.default)(e);n&&(r[n]=t.props[e])})),r.adPlay=t.eventHandlers.onAdPlay,r.beforeComplete=t.props.onOneHundredPercent,r.beforePlay=function(e){t.eventHandlers.onBeforePlay(e,n)},r.fullscreen=t.eventHandlers.onFullScreen,r.mute=t.eventHandlers.onMute,r.play=t.eventHandlers.onPlay,r.playlistItem=t.eventHandlers.onVideoLoad,r.time=t.eventHandlers.onTime,Object.keys(r).forEach((function(e){n.on(e,r[e])}))}},12876:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.context,n=e.onLoadCallback,i=e.scriptSrc,r=e.uniqueScriptId,o=t.createElement("script");o.id=r,o.src=i,o.onload=n,t.head.appendChild(o)}},40648:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=t.jwplayer&&t.jwplayer(e);n&&n.remove()}},57668:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t=e.context,n=e.playerId,i=t.__JW_PLAYER_CONFIGS__=t.__JW_PLAYER_CONFIGS__||{},r=i[n];r?t.jwplayer.defaults=r:i[n]=t.jwplayer.defaults}},84606:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(45697),o=(i=r)&&i.__esModule?i:{default:i};var a={aspectRatio:o.default.oneOf(["inherit","1:1","16:9"]),className:o.default.string,customProps:o.default.object,file:o.default.string,generatePrerollUrl:o.default.func,image:o.default.string,isAutoPlay:o.default.bool,isMuted:o.default.bool,licenseKey:o.default.string,onAdPause:o.default.func,onAdPlay:o.default.func,onAdResume:o.default.func,onAdSkipped:o.default.func,onAdComplete:o.default.func,onAutoStart:o.default.func,onEnterFullScreen:o.default.func,onError:o.default.func,onExitFullScreen:o.default.func,onFiftyPercent:o.default.func,onMute:o.default.func,onNinetyFivePercent:o.default.func,onOneHundredPercent:o.default.func,onPause:o.default.func,onPlay:o.default.func,onReady:o.default.func,onResume:o.default.func,onSeventyFivePercent:o.default.func,onTenSeconds:o.default.func,onThirtySeconds:o.default.func,onThreeSeconds:o.default.func,onTwentyFivePercent:o.default.func,onUnmute:o.default.func,onVideoLoad:o.default.func,onBuffer:o.default.func,onBufferChange:o.default.func,playerId:o.default.string.isRequired,playerScript:o.default.string.isRequired,playlist:o.default.oneOfType([o.default.string,o.default.array]),useMultiplePlayerScripts:o.default.bool};t.default=a},47320:function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(67294),o=m(r),a=m(n(69590)),s=m(n(42804)),l=m(n(53817)),u=m(n(87890)),c=m(n(7512)),d=m(n(12876)),f=m(n(40648)),p=m(n(57668)),h=m(n(19090)),y=m(n(84606));function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={adHasPlayed:!1,hasPlayed:!1,hasFired:{}},n.eventHandlers=(0,s.default)(n),n.uniqueScriptId="jw-player-script",e.useMultiplePlayerScripts&&(n.uniqueScriptId+="-"+e.playerId),n.videoRef=null,n._initialize=n._initialize.bind(n),n._setVideoRef=n._setVideoRef.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){var e=!!window.jwplayer,t=document.getElementById(this.uniqueScriptId),n=this.props.useMultiplePlayerScripts;n||!e?n&&t?this._initialize():t?t.onload=(0,l.default)(t,this._initialize):(0,d.default)({context:document,onLoadCallback:this._initialize,scriptSrc:this.props.playerScript,uniqueScriptId:this.uniqueScriptId}):this._initialize()}},{key:"shouldComponentUpdate",value:function(e){var t=this.props.file!==e.file,n=!(0,a.default)(this.props.playlist,e.playlist);return t||n}},{key:"componentDidUpdate",value:function(){window.jwplayer&&window.jwplayer(this.videoRef)&&this._initialize()}},{key:"componentWillUnmount",value:function(){(0,f.default)(this.videoRef,window)}},{key:"_initialize",value:function(){var e=this.props,t=e.playerId;e.useMultiplePlayerScripts&&(0,p.default)({context:window,playerId:t});var n=window.jwplayer(this.videoRef);if(n){var i=(0,u.default)(this.props);(0,c.default)({component:this,player:n,playerOpts:i})}}},{key:"_setVideoRef",value:function(e){this.videoRef=e}},{key:"render",value:function(){return o.default.createElement("div",{className:this.props.className},o.default.createElement("div",{id:this.props.playerId,ref:this._setVideoRef}))}}]),t}(r.Component);v.defaultProps=h.default,v.displayName="ReactJWPlayer",v.propTypes=y.default,t.Z=v}},function(e){e.O(0,[260,774,888,179],(function(){return t=71425,e(e.s=t);var t}));var t=e.O();_N_E=t}]);